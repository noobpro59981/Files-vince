<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel - Master Control</title>
    <style>
        body { background: #0b0b0b; color: #00ff00; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .gen-box { border: 2px solid #00ff00; padding: 20px; width: 450px; background: #111; box-shadow: 0 0 15px #00ff00; border-radius: 8px; }
        input, select { width: 90%; padding: 10px; margin: 10px 0; background: #000; border: 1px solid #00ff00; color: #00ff00; border-radius: 5px; }
        button { width: 100%; padding: 10px; background: #00ff00; color: #000; border: none; font-weight: bold; cursor: pointer; margin-top: 5px; border-radius: 5px; }
        button:hover { background: #00cc00; }
        .key-item { background: #1a1a1a; padding: 10px; margin-top: 10px; border-left: 5px solid #00ff00; font-size: 12px; position: relative; }
        .key-item.blocked { border-left-color: #ff4757; color: #ff4757; }
        .controls { display: flex; gap: 5px; margin-top: 5px; }
        .btn-small { padding: 5px; font-size: 10px; width: auto; flex: 1; }
        .btn-block { background: #ff4757; color: white; }
        .btn-unblock { background: #1e90ff; color: white; }
    </style>
</head>
<body>

    <div class="gen-box">
        <h2 style="text-align:center; margin-top:0;">SYSTEM CONTROL</h2>
        
        <label>Set Duration (Days):</label>
        <input type="number" id="daysInput" value="1" min="1">
        
        <button onclick="generateKey()">GENERATE SECURE KEY</button>
        
        <div id="keyList" style="margin-top: 20px;">
            <strong>Active Database:</strong>
            </div>

        <button style="margin-top:20px; background:#333; color: #fff;" onclick="clearAll()">WIPE ALL DATA</button>
    </div>

    <script>
        function generateKey() {
            const days = parseInt(document.getElementById('daysInput').value);
            const newKeyStr = "DEV-" + Math.random().toString(36).substr(2, 8).toUpperCase();
            
            // Kalkulahin ang expiration date
            const expireDate = new Date();
            expireDate.setDate(expireDate.getDate() + days);

            const keyObject = {
                key: newKeyStr,
                expiry: expireDate.getTime(),
                status: 'active' // active o blocked
            };

            let keys = JSON.parse(localStorage.getItem("pro_keys") || "[]");
            keys.push(keyObject);
            localStorage.setItem("pro_keys", JSON.stringify(keys));
            
            displayKeys();
        }

        function toggleStatus(index) {
            let keys = JSON.parse(localStorage.getItem("pro_keys") || "[]");
            keys[index].status = (keys[index].status === 'active') ? 'blocked' : 'active';
            localStorage.setItem("pro_keys", JSON.stringify(keys));
            displayKeys();
        }

        function deleteKey(index) {
            let keys = JSON.parse(localStorage.getItem("pro_keys") || "[]");
            keys.splice(index, 1);
            localStorage.setItem("pro_keys", JSON.stringify(keys));
            displayKeys();
        }

        function displayKeys() {
            const list = document.getElementById('keyList');
            let keys = JSON.parse(localStorage.getItem("pro_keys") || "[]");
            
            list.innerHTML = "<strong>Active Database:</strong>";
            
            keys.forEach((k, index) => {
                const now = new Date().getTime();
                const timeLeft = k.expiry - now;
                const daysLeft = Math.ceil(timeLeft / (1000 * 60 * 60 * 24));
                const isExpired = timeLeft < 0;

                const div = document.createElement('div');
                div.className = `key-item ${k.status === 'blocked' || isExpired ? 'blocked' : ''}`;
                
                div.innerHTML = `
                    <div><strong>KEY:</strong> ${k.key}</div>
                    <div><strong>EXPIRES IN:</strong> ${isExpired ? 'EXPIRED' : daysLeft + ' Day(s)'}</div>
                    <div><strong>STATUS:</strong> ${isExpired ? 'INACTIVE' : k.status.toUpperCase()}</div>
                    <div class="controls">
                        <button class="btn-small btn-unblock" onclick="toggleStatus(${index})">
                            ${k.status === 'active' ? 'BLOCK' : 'UNBLOCK'}
                        </button>
                        <button class="btn-small btn-block" onclick="deleteKey(${index})">DELETE</button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function clearAll() {
            if(confirm("Delete all keys?")) {
                localStorage.removeItem("pro_keys");
                displayKeys();
            }
        }

        displayKeys();
    </script>
</body>
</html>
